<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://osguus.github.io"
        },
        "articleSection" : "post",
        "name" : "The Atlas Project",
        "headline" : "The Atlas Project",
        "description" : "<p>Unique to Carnegie Mellon University, buggy is a competition where Greek and independent organizations race with their buggies, small, low, aerodynamic vehicles, powered only by gravity and human pushers. Traditionally, students are recruited to drive these on the course. In the Atlas Project, our goal to make a buggy that can drive itself around the course using only the limited knowledge we can get from our sensors.</p>",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2016",
        "datePublished": "2016-11-05 18:25:22 &#43;0530 &#43;0530",
        "dateModified" : "2016-11-05 18:25:22 &#43;0530 &#43;0530",
        "url" : "https://osguus.github.io/post/work1/",
        "wordCount" : "1257",
        "image" : https://osguus.github.ioimg/atlasproject/quasar1.jpg",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>The Atlas Project </title>


<meta name="description" content="Oshadha&#39;s Website!" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link href="https://osguus.github.io/css/style.css?v=1552079494" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://osguus.github.io/css/custom.css?v=1552079494" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://osguus.github.io/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://osguus.github.io/img/favicon.ico" type="image/x-icon">


</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fas fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/categories/projects">Projects</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    
    <li>
      <a href="https://www.facebook.com/oshadha.gunasekara" data-animate-hover="pulse" class="facebook" target="_blank">
        <i class="fab fa-facebook-square" title="facebook"></i>
        <span class="screen-reader-text">facebook</span>
      </a>
    </li>
    

    

    

    
    <li>
      <a href="https://www.instagram.com/_oshadha_/" data-animate-hover="pulse" class="instagram" target="_blank">
        <i class="fab fa-instagram" title="instagram"></i>
        <span class="screen-reader-text">instagram</span>
      </a>
    </li>
    

    
    <li>
      <a href="mailto:ovg@andrew.cmu.edu" data-animate-hover="pulse" class="email">
        <i class="fas fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    
    <li>
      <a href="https://www.linkedin.com/in/oshadhagunasekara/" data-animate-hover="pulse" class="linkedin" target="_blank">
        <i class="fab fa-linkedin-in" title="linkedin"></i>
        <span class="screen-reader-text">linkedin</span>
      </a>
    </li>
    

    


    
    <li>
      <a href="http://github.com/osguus" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fab fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    

    


  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> Oshadha Gunasekara </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fas fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Roboticist | Developer | Hacker</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li id="menu-item" class='menu-item menu-item-type-custom menu-item-object-custom '>
          <a href="https://osguus.github.io/">Home</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://osguus.github.io/about/">About</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://osguus.github.io/resumes/">Resumes</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://osguus.github.io/contact/">Get in touch</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    
    <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

      <div class='featured-image lazy lazy-bg-image'  data-background="https://osguus.github.io/img/atlasproject/quasar1.jpg">
      </div>
      
        <div class="entry-meta">
          <span class="date">05 November</span>	<span> / </span>

          <span class="author">
            <a href="https://osguus.github.io" title="Posts by Oshadha Gunasekara" rel="author">Oshadha Gunasekara</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/projects">Projects</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> The Atlas Project</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Unique to Carnegie Mellon University, buggy is a competition where Greek and independent organizations race with their buggies, small, low, aerodynamic vehicles, powered only by gravity and human pushers. Traditionally, students are recruited to drive these on the course. In the Atlas Project, our goal to make a buggy that can drive itself around the course using only the limited knowledge we can get from our sensors.</p>

<p>The project had grown significantly from its origins as a crazy idea fulfilled by two enthusiastic roommates, now garnering a small following. I was not one of the founders of this project; I joined two years after its founding, a freshman looking for a way to make a mark on campus. From then on, I worked my way up, becoming the president of the project and leading it to its recognition as a student organization.</p>

<h2 id="roboquasar">RoboQuasar</h2>

<p><img src="/img/atlasproject/quasar2.jpg" alt="RoboQuasar" /></p>

<p>When I joined the project, work was taking place to retrofit Quasar, an old aluminum frame and shell buggy built to race in 2002, into an autonomous platform (now known as RoboQuasar). I was still new to the project, so I spent this year starting to learn about the ins and outs of robotics programming.</p>

<h3 id="hardware-issues">Hardware Issues</h3>

<p>We built RoboQuasar with the following:</p>

<ol>
<li>Steering system powered through timing belt and stepper motor.</li>
<li>Integrated Measurement Unit (IMU) to measure orientation.</li>
<li>GPS to measure position.</li>
</ol>

<p>These three things would (hypothetically) give us all we need to figure out where we are and actuate the buggy to where it needed to be. However, we ultimately found many issues with this setup, specifically in the steering and GPS.</p>

<p>First off, our steering system was driven by a stepper motor connected to a large circular bearing with a timing belt. Since we were using a stepper motor, we were able to get fast and accurate turns with the motor. However, Quasar was not built with suspension, and as a result, was a <strong>very</strong> bumpy ride. This caused issues with our timing belt setup, often resulting in stepper skips and looseness in the belt, despite attempts at tightening it.</p>

<p>Further, the consumer GPS we used (Adafruit Ultimate GPS Breakout) had trouble on certain parts of the course. The buggy course is pictured below:</p>

<p><img src="/img/atlasproject/course.jpg" alt="Buggy course" /></p>

<p>In the image above, we can see that hills 1, 3, 4, and 5 are very close to buildings. These buildings caused interference with the GPS signal, resulting in faulty readings and sometimes no readings at these positions. Further, in the first half of the free roll, the track is covered by many trees. These trees further block the receiver&rsquo;s reception to the satellites, leading to spotty reception on the course.</p>

<h3 id="localization-troubles">Localization Troubles</h3>

<p>At the beginning, in 2016, we had not tested for these fundamental issues, ultimately resulting in issues down the line. Instead, we put all of our effort (our team was around five people at the time) into determining how to localize the buggy on the course.</p>

<p>This year, we utilized just the GPS as our localizer. However, for reasons listed above, the frequency with which we received GPS data was certainly not ideal, leading to a relatively significant delay on our localization as well as some drift for certain portions of the course. To account for this drift, we started at the same spot at the beginning of the course. We noted this position and given the first few measurements of the GPS, we calculated a bias value that we used for the entire course.</p>

<p>Further, the IMU gave us an angle relative to where the device was started. To bring this angle into a global frame, we used a compass to calculate the angle at the beginning of the course whenever the buggy started. This was used as an additional bias to the sensor data.</p>

<p>Using this fairly simple method, we were sometimes able to get decent localization estimates around the course. However, certain areas of the course still proved to have significantly different drift and localization attempts were not consistent.</p>

<h3 id="controlling-roboquasar">Controlling RoboQuasar</h3>

<p>For the controller, we used a very simple controller. Since our state estimate was in longitude and latitude, we could use google maps to give us waypoints along the course. These waypoints gave us locations where we wanted RoboQuasar to be. The estimator above (primary GPS and IMU) gave us our position and orientation on the course. Our controller simply pointed the steering at the next waypoint given our current position.</p>

<p>This method of controller and estimator worked <strong>sometimes</strong>. However, it was very volatile. One wrong measurement could call disaster for the entire system. We were actually able to get one fully autonomous run around the course, with some crashes.</p>

<h2 id="babybuggy">BabyBuggy</h2>

<p><img src="/img/atlasproject/babybuggy1.jpg" alt="BabyBuggy!" /></p>

<p>The following year, in 2017, after our experience with RoboQuasar, we came to the conclusion that we did not have enough sensors to properly localize and control the buggy. Again, due to lack of significant funding, we decided to retrofit. This time, however, we came across a baby stroller in a Massachusetts junkyard. We also came across a LIDAR being sold on eBay for $800, a solid deal for us! So, in the end, the aptly named BabyBuggy was built with the following:</p>

<ol>
<li>Linear actuator for steering.</li>
<li>Integrated Measurement Unit (IMU) for relative orientation.</li>
<li>GPS for latitude/longitude position.</li>
<li>Two wheel encoders for velocity and distance estimation.</li>
<li>LMS200 LIDAR sensor for range measurements.</li>
</ol>

<p>The priority for this year was building the buggy, so a significant portion of our team was unable to work on the development of software.</p>

<h3 id="dead-reckoning">Dead Reckoning</h3>

<p>In 2018, however, we began to get a better idea of how to approach this problem. After researching the localization problem, we came up with a few methods of localization:</p>

<ol>
<li>Pure GPS Localization</li>
<li>Dead Reckoning w/ GPS bias</li>
<li>Dead Reckoning w/ no bias</li>
</ol>

<p>From our experience in 2016, we realized that purely GPS-based localization would cause issues on the course, so we were more focused on the Dead Reckoning solutions. In the end, we were able to make a simple velocity estimator with the encoders by utilizing a first order filter. Using this velocity estimate and a relative yaw, pitch, and roll from the IMU, we could systematically estimate our position and orientation in 3D by doing the following update (pulled directly from our dead reckoning code):</p>

<pre><code class="language-python">yawMatrix = np.matrix([
            [math.cos(yaw), -math.sin(yaw), 0],
            [math.sin(yaw), math.cos(yaw), 0],
            [0, 0, 1]
            ])

pitchMatrix = np.matrix([
            [math.cos(pitch), 0, math.sin(pitch)],
            [0, 1, 0],
            [-math.sin(pitch), 0, math.cos(pitch)]
            ])

rollMatrix = np.matrix([
            [1, 0, 0],
            [0, math.cos(roll), -math.sin(roll)],
            [0, math.sin(roll), math.cos(roll)]
            ])

R = yawMatrix * pitchMatrix * rollMatrix
vel_mat = np.matrix([[state[3]], [0], [0]])

transf_vel = R * vel_mat

cur_time = rospy.get_time()
dt = cur_time - prev_time
prev_time = cur_time

state[0] = state[0] + transf_vel[0,0]*dt
state[1] = state[1] + transf_vel[1,0]*dt
state[2] = state[2] + transf_vel[2,0]*dt
</code></pre>

<p>We fed this dead reckoned estimate into a ROS package known as <a href="http://wiki.ros.org/gmapping">gmapping</a>. With a lot of tuning, we were able to get a decent map of the course. However, this map still has some loop closure issues, likely caused by lack of sufficient data. We are working on making a better map with clearer features.</p>

<p>We are currently working on the controller for BabyBuggy. We plan to roll BabyBuggy again during the 2019 Sweepstakes (Buggy) competition.</p>

<p><img src="/img/atlasproject/map.png" alt="Generated Map" /></p>

<h2 id="dunebuggy">DuneBuggy</h2>

<p>DuneBuggy is our newest autonomous platform. Currently, it is still under construction. The chassis is made from a Razor Dunebuggy that was found on Amazon. We are planning to utilize all we learned from past years in this retrofit.</p>

<h2 id="resources">Resources</h2>

<p>All the software for this project can be found in our <a href="https://github.com/AtlasBuggy">GitHub Organization</a>.</p>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  <div class="entry-categories"><p><span>Categories</span>
    
    <a href="/categories/projects" title="View all posts in Projects">Projects</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
      <img alt='Oshadha Gunasekara' src="https://www.gravatar.com/avatar/3ed68d10209ed3467cc5cb7b539f8192?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Written by:<a href="https://osguus.github.io" title="Posts by Oshadha Gunasekara" rel="author">Oshadha Gunasekara</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Oshadha is an enthusiastic maker, developer, and roboticist. He's always looking to learn more about how to make cool things.</p>
      
      
	
      

    


  

















</div>
</div>

</div>
</div>

<section id="comments" class="comments">
  

  




</section>
</div>

 



    </div>

    <footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> Oshadha Gunasekara </a>
    
	</h1>

			
			<p class="site-description">Roboticist | Developer | Hacker</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        
				<li>
					<a class="facebook" target="_blank"
					   href="https://www.facebook.com/oshadha.gunasekara" >
						<i class="fab fa-facebook-f" title="facebook"></i>
						<span class="screen-reader-text">facebook</span>
					</a>
				</li>
        

        


        

        
        <li>
        <a href="https://www.instagram.com/_oshadha_/"  class="instagram" target="_blank">
            <i class="fab fa-instagram" title="instagram"></i>
            <span class="screen-reader-text">instagram</span>
        </a>
        </li>
        

        
        <li>
        <a href="mailto:ovg@andrew.cmu.edu"  class="email">
            <i class="fas fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        
        <li>
        <a href="https://www.linkedin.com/in/oshadhagunasekara/" class="linkedin" target="_blank">
            <i class="fab fa-linkedin-in" title="linkedin"></i>
            <span class="screen-reader-text">linkedin</span>
        </a>
        </li>
        

        


        
        <li>
        <a href="http://github.com/osguus"  class="github" target="_blank">
            <i class="fab fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

        

				</ul>	<div class="design-credit">
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://osguus.github.io/js/jquery.min.js"></script>
<script src="https://osguus.github.io/js/jquerymigrate.js"></script>
<script src="https://osguus.github.io/js/production.min.js?v=1552079494"></script>

</body>
</html>
